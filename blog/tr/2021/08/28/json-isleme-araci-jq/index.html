
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>JSON İşleme Aracı: jq - Uğur “vigo” Özyılmazel</title>
        <link rel="alternate" type="application/atom+xml" title="Atom Feed (Türkçe)" href="/feed-tr.xml" />
        <link rel="alternate" type="application/atom+xml" title="Atom Feed (English)" href="/feed-en.xml" />

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
        <script src="https://kit.fontawesome.com/ebc2456445.js" crossorigin="anonymous"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

        <link href="/public/css/syntax.css" rel="stylesheet" />
        <link href="/public/css/application.css" rel="stylesheet" />
    

        <script src="/public/js/application.js"></script>
    
        <meta name="date" content="2023-10-19T19:00:23+03:00" />
        <meta name="description" content="JSON dosya formatı artık hayatımızın vazgeçilmezi. Gündelik hayatta hep onunla işimiz oluyor. Peki bir araç olsa, istediğimiz gibi filtreleme yapsak, hem de hiç kod yazmasak?" />
        <meta name="author" content="Uğur “vigo” Özyılmazel"/>
        <meta name="copyright" content="(c) 2006 / 2023 - Uğur “vigo” Özyılmazel" />
        <meta property="og:url" content="https://ugur.ozyilmazel.com/blog/tr/2021/08/28/json-isleme-araci-jq/" />
        <meta property="og:title" content="JSON İşleme Aracı: jq" />
        <meta property="og:site_name" content="vigo" />
        <meta property="og:type" content="website" />
        <meta property="og:description" content="JSON dosya formatı artık hayatımızın vazgeçilmezi. Gündelik hayatta hep onunla işimiz oluyor. Peki bir araç olsa, istediğimiz gibi filtreleme yapsak, hem de hiç kod yazmasak?" />
        <meta property="og:image" content="https://ugur.ozyilmazel.com/public/images/og/ugur-vigo-ozyilmazel-500x500.jpg" />
        <meta property="og:image:type" content="image/jpeg" />
        <meta property="og:image:width" content="500" />
        <meta property="og:image:height" content="500" />

    <link href="/public/images/favicon.png" rel="shortcut icon" type="image/png" />
    </head>
<body>
    
    
    <section class="section menu">
    <div class="container">
        <nav class="level is-mobile">
            <div class="level-left">
<div class="level-item"><a href="/">Anasayfa</a></div><div class="level-item"><a href="/blog/tr/" class="is-active">Blog Arşiv</a></div><div class="level-item"><a href="/sayfa/tr/sunumlar/">Sunumlar</a></div>            </div>
            <div class="level-right">
<div class="level-item"><a href="https://vbyazilim.com" target="_blank">VB</a></div><div class="level-item"><a href="/en/">EN</a></div>            </div>
        </nav>
    </div>
</section>

    
        <section class="hero is-medium cover is-hidden-touch" style="background-image: url(/public/images/covers/international-karate.png);">
        <div class="hero-body">
            <div class="container has-text-left">
                
                
            </div>
        </div>
    </section>
  
    
        <section class="section main">
        <div class="container">
        
            <div class="columns is-multiline is-variable is-8">
                <div class="column is-9-desktop is-full-tablet">
                    <div class="content is-large">
                        <article>
                            <div class="meta">
                                <span class="reading-time">OKUMA SÜRESİ 03:29</span>
                                &mdash;
                                <time pubdate datetime="2021-08-28T11:38:00+03:00" title="28 Ağustos 2021, Cumartesi 11:38">28 Ağustos 2021, Cumartesi 11:38</time>


                                <div class="tags mt-3">
                                        <a href="/blog/tr/etiket/json/" class="tag is-info">json</a>
                                        <a href="/blog/tr/etiket/jq/" class="tag is-info">jq</a>
                                        <a href="/blog/tr/etiket/bash/" class="tag is-info">bash</a>
                                </div>
                                
                            </div>
                            
                            <h1 class="title">JSON İşleme Aracı: jq</h1>
                                <h2 class="subtitle is-size-4-desktop">
                                    Şimdi JSON Düşünsün!
                                </h2>
                            
                            <div class="yield"><p><code>JSON</code> dosya formatı artık hayatımızın vazgeçilmezi. Gündelik hayatta hep
onunla işimiz oluyor. Peki bir araç olsa, istediğimiz gibi filtreleme
yapsak, hem de hiç kod yazmasak?</p>

<p></p>

<p>Sizi harika bir araçla tanıştırmak istiyorum: <code>jq</code>. <code>jq</code> süper hızlı çalışan
hafif siklet bir komut satırı aracı. Tüm platformlarda var. macOS kullanıcıları
hemen:</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span>brew <span class="nb">install </span>jq
</code></pre></div>
<p>ile kurabilir. Elle kurmak için <a href="https://stedolan.github.io/jq/">sitesinden</a> indirip kurulum yapabilirsiniz.
Eğer kurulum yapmak istemezseniz, <a href="https://jqplay.org/">web tarayıcısı</a> üzerinden de kullanabilirsiniz.
<a href="https://stedolan.github.io/jq/manual/">Dokümantasyonu</a> ve nasıl kullanılacağına dair bir <a href="https://stedolan.github.io/jq/tutorial/">tuturial</a>’i de bulunuyor.</p>

<p>Hemen ufak ufak girişelim.</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'{"x": 1, "y": 2}'</span> | jq
<span class="o">{</span>
  <span class="s2">"x"</span>: 1,
  <span class="s2">"y"</span>: 2
<span class="o">}</span>

<span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'{"x": 1, "y": 2}'</span> | jq .x
1
</code></pre></div>
<p>Elimizde <code>{key: value}</code> şeklinde bulunan nesnelerde <code>.key</code> mantığıyla veriye
ulaşabiliyoruz. Eğer iç-içe yani <strong>nested</strong> key’ler varsa; <code>.key.key.key</code> şeklinde
zincirleme ilerleyebiliyoruz. Bu durum <strong>Object Identifier-Index</strong> olarak geçer:</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'{"x": {"a": "bu a değeri"}}'</span> | jq .x.a
<span class="s2">"bu a değeri"</span>
</code></pre></div>
<p>Eğer <strong>key var mı?</strong> diye bakmak istersek <strong>Optional Object Identifier-Index</strong>
kullanırız:</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'{"foo": 1, "bar": 2}'</span> | jq <span class="s1">'.baz?'</span>
null
</code></pre></div>
<p>Yani <code>.key?</code> şeklinde kullanılır. Eğer key yoksa sonuç <code>null</code> döner. Genelde
elimizde hep bir liste yani <strong>Array</strong> ve içinde de objeler olur:</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'[{"id": 1}, {"id": 2}]'</span> | jq <span class="nb">.</span>
<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"id"</span>: 1
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"id"</span>: 2
  <span class="o">}</span>
<span class="o">]</span>
</code></pre></div>
<p>Eğer <strong>flat-map</strong> yapmak istersek, yani aradan virgülü atmak;</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'[{"id": 1}, {"id": 2}]'</span> | jq .[]
<span class="o">{</span>
  <span class="s2">"id"</span>: 1
<span class="o">}</span>
<span class="o">{</span>
  <span class="s2">"id"</span>: 2
<span class="o">}</span>
</code></pre></div>
<p>Sadede <code>id</code>’lerin değerlerini alalım:</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'[{"id": 1}, {"id": 2}]'</span> | jq <span class="s1">'.[] | .id'</span>
1
2
</code></pre></div>
<p>Yani <code>jq &#39;.[] | .id&#39;</code> şeklinde. Elimizde aşağıdaki gibi bir <code>json</code> olsun:</p>
<div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vigo"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="mi">3</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>İçinden sadece <code>.user</code>’ı alalım:</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'{"user": {"id": 1, "name": "vigo"}, "items": [1,2,3]}'</span> | jq <span class="s1">'.user'</span>
<span class="o">{</span>
  <span class="s2">"id"</span>: 1,
  <span class="s2">"name"</span>: <span class="s2">"vigo"</span>
<span class="o">}</span>
</code></pre></div>
<p>Aynı nesneden kopya bir liste:</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'{"x": 1}'</span> | jq <span class="s1">'[. , . , .]'</span>
<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"x"</span>: 1
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"x"</span>: 1
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"x"</span>: 1
  <span class="o">}</span>
<span class="o">]</span>
</code></pre></div>
<p>İşin sırrı <code>jq &#39;[. , . , .]&#39;</code> bu kısında. <code>.</code> elemanın kendisi oluyor. Elimizde
kullanıcıların listesi var mesela:</p>
<div class="highlight"><pre class="highlight json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vigo"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lego"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"figo"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Sadece <code>.name</code>’leri alalım:</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'[{"id": 1, "name": "vigo"}, {"id": 2, "name": "lego"}, {"id": 3, "name": "figo"}]'</span> | jq <span class="s1">'.[] | .name'</span>
<span class="s2">"vigo"</span>
<span class="s2">"lego"</span>
<span class="s2">"figo"</span>
</code></pre></div>
<h3>Map Özelliği</h3>

<p>Tüm programlama dillerinde bulunan, <strong>iterable</strong> yani bir koleksiyonun içinde
tüm elemanları bir fonksiyondan geçirme işlemi. Elimizde sayılardan oluşan
bir liste var ver biz koleksiyon içindeki her sayıya bir ekleyeceğiz:</p>
<div class="highlight"><pre class="highlight json"><code><span class="p">[</span><span class="w">
    </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="mi">4</span><span class="p">,</span><span class="w">
    </span><span class="mi">5</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'[1,2,3,4,5]'</span> | jq <span class="s1">'map(. + 1)'</span>
<span class="o">[</span>
  2,
  3,
  4,
  5,
  6
<span class="o">]</span>
</code></pre></div>
<p><code>map(. + 1)</code> -&gt; <code>.</code> elemanın kendisi, sonrasında <code>+</code> operatör, <code>1</code> de ekleyeceğimiz
değer. <code>.</code> <strong>Identity</strong> anlamındadır. Çarpma versiyonu:</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'[1,2,3,4,5]'</span> | jq <span class="s1">'map(. * 2)'</span>
<span class="o">[</span>
  2,
  4,
  6,
  8,
  10
<span class="o">]</span>
</code></pre></div>
<p>Eğer çıktıların daha kısa ve kompakt olmasını isterseniz <code>-c</code> parametresini
kullanabiliriniz:</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'[1,2,3,4,5]'</span> | jq <span class="s1">'map(. * 2)'</span> <span class="nt">-c</span>
<span class="o">[</span>2,4,6,8,10]
</code></pre></div>
<p>Şimdi elimizdeki aynı listeden bir transformasyon yapalım:</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'[1,2,3,4,5]'</span> | jq <span class="s1">'map({"x": .})'</span>
<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"x"</span>: 1
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"x"</span>: 2
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"x"</span>: 3
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"x"</span>: 4
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"x"</span>: 5
  <span class="o">}</span>
<span class="o">]</span>
</code></pre></div>
<h3>Fonksiyonlar</h3>

<p>En sık kullandığım <code>length</code> fonksiyonu:</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'[1,2,3,4,5]'</span> | jq <span class="s1">'length'</span>
5

<span class="nv">$ </span>jq length /path/to/file.json
</code></pre></div>
<p>Elementin indeksini bulalım. <code>[1,2,3,4,5]</code> listesinde <code>2</code>’nin indeksi <code>1</code>’dir
yani 0. element: <code>1</code>, 1.element de <code>2</code>’dir ya, bunu <code>jq</code> ile gelen <code>indices</code>
fonksiyonunu kullanarak bulalım:</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'[1,2,3,4,5]'</span> | jq <span class="s1">'indices(2)'</span>
<span class="o">[</span>
  1
<span class="o">]</span>

<span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'[1,2,3,4,5]'</span> | jq <span class="s1">'indices(2) | .[]'</span>
1
</code></pre></div>
<p>String içinde pipe yaparak çıktıyı flat-map yaptık. <code>jq &#39;komut | .[]&#39;</code> şeklinde.
Bir kısım fonksiyon örneği verelim:</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'[2, 4, 6, 8]'</span> | jq <span class="s1">'contains([2])'</span>  <span class="c"># true</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'[2, 4, 6, 8]'</span> | jq <span class="s1">'reverse'</span> <span class="nt">-c</span>     <span class="c"># [8,6,4,2]</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'[2, 4, 6, 8]'</span> | jq <span class="s1">'min'</span>            <span class="c"># 2</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'[2, 4, 6, 8]'</span> | jq <span class="s1">'max'</span>            <span class="c"># 8</span>

<span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'"hello"'</span> | jq <span class="s1">'split("")'</span> <span class="nt">-c</span>       <span class="c"># ["h","e","l","l","o"]</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'"hello"'</span> | jq <span class="s1">'test("he*")'</span> <span class="nt">-c</span>     <span class="c"># true</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'"hello"'</span> | jq <span class="s1">'test("he*!")'</span> <span class="nt">-c</span>    <span class="c"># false</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'"hello"'</span> | jq <span class="s1">'contains("a")'</span> <span class="nt">-c</span>   <span class="c"># false</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'"hello"'</span> | jq <span class="s1">'startswith("h")'</span> <span class="nt">-c</span> <span class="c"># true</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'"hello"'</span> | jq <span class="s1">'endswith("o")'</span> <span class="nt">-c</span>   <span class="c"># true</span>

<span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'[{"user": {"id": 1, "name": "vigo"}}, {"user": {"id": 2, "name": "ezel"}}]'</span> <span class="se">\</span>
    | jq <span class="s1">'.[0] | keys'</span> <span class="nt">-c</span>      <span class="c"># ["user"]</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'[{"user": {"id": 1, "name": "vigo"}}, {"user": {"id": 2, "name": "ezel"}}]'</span> <span class="se">\</span>
    | jq <span class="s1">'.[0].user | keys'</span> <span class="nt">-c</span> <span class="c"># ["id","name"]</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'{"id": 1, "name": "vigo"}'</span> | jq <span class="s1">'has("id")'</span> <span class="c"># true</span>

<span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'{"id": 1, "name": "vigo"}'</span> | jq <span class="s1">'flatten'</span> <span class="nt">-c</span> <span class="c"># [1,"vigo"]</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'[{"user": {"id": 1, "name": "vigo"}}, {"user": {"id": 2, "name": "ezel"}}]'</span> <span class="se">\</span>
    | jq <span class="s1">'.[0].user | flatten'</span> <span class="nt">-c</span> <span class="c"># [1,"vigo"]</span>
</code></pre></div>
<p><code>to_entries</code> ile;</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'{"id": 1, "name": "vigo"}'</span> | jq <span class="s1">'to_entries'</span>
<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"key"</span>: <span class="s2">"id"</span>,
    <span class="s2">"value"</span>: 1
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"key"</span>: <span class="s2">"name"</span>,
    <span class="s2">"value"</span>: <span class="s2">"vigo"</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre></div>
<p>Şeklinde çıktı alırız. Diğer sevdiğim bir fonksiyon da <code>select</code>:</p>
<div class="highlight"><pre class="highlight shell"><code><span class="c"># id’si 1 olanı alalım, select(.id == 1)</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'[{"id": 1, "name": "vigo"}, {"id": 2, "name": "ezel"}]'</span> <span class="se">\</span>
    | jq <span class="s1">'.[] | select(.id == 1)'</span>
<span class="o">{</span>
  <span class="s2">"id"</span>: 1,
  <span class="s2">"name"</span>: <span class="s2">"vigo"</span>
<span class="o">}</span>
</code></pre></div>
<p>Yaşı <code>10</code>’dan küçükleri filtreleyelim:</p>
<div class="highlight"><pre class="highlight json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vigo"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"age"</span><span class="p">:</span><span class="w"> </span><span class="mi">46</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ezel"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"age"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>ve;</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nb">echo</span> <span class="s1">'[{"id": 1, "name": "vigo", "age": 46}, {"id": 2, "name": "ezel", "age": 7}]'</span> <span class="se">\</span>
    | jq <span class="s1">'.[] | select(.age &lt; 10) | .name'</span> <span class="c"># "ezel"</span>
</code></pre></div>
<p>İşin püf noktası <code>&#39;.[] | select(.age &lt; 10) | .name&#39;</code> kısmında. <code>.[]</code> ile liste
işlemi yapacağımızı, tek tek elemanı alacağımızı belirtip elemanı <code>|</code> ile
<code>select</code> fonksiyonuna <code>pipe</code> ediyoruz. Fonksiyondan dönenin sadece <code>.name</code>’ini
alıyoruz.</p>

<p><code>jq</code> içinde bir kısım fonksiyonlarla geliyor. Detaylara
<a href="https://stedolan.github.io/jq/manual/#Builtinoperatorsandfunctions">buradan</a> bakabilirsiniz.</p>

<h3>Parantez, Array ve Obje Üreticileri</h3>

<p>Parantez ile aynı matematik işlemlerindeki gibi öncelik ve gruplama işlerini
yapabiliriz:</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'1'</span> | jq <span class="s1">'(. + 2) * 5'</span>
15
</code></pre></div>
<p><code>.</code> identity idi, yani <code>1</code>’in kendisi. <code>(1 + 2) * 5 -&gt; 3 * 5 -&gt; 15</code>.</p>

<p><code>[]</code> ile <strong>Array Construction</strong> yani liste üretebiliriz:</p>
<div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vigo"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"badges"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"python"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ruby"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"golang"</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Şimdi bir çıktı üretelim ve tipi liste olsun:</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'{"user": "vigo", "badges": ["python", "ruby", "golang"]}'</span> | jq <span class="s1">'[.user, .badges]'</span>
<span class="o">[</span>
  <span class="s2">"vigo"</span>,
  <span class="o">[</span>
    <span class="s2">"python"</span>,
    <span class="s2">"ruby"</span>,
    <span class="s2">"golang"</span>
  <span class="o">]</span>
<span class="o">]</span>
</code></pre></div>
<p>Şimdi <code>{}</code> ile <strong>Object Construction</strong> yapalım:</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'{"user": "vigo", "badges": ["python", "ruby", "golang"]}'</span> | jq <span class="s1">'{user, stack: .badges}'</span>
<span class="o">{</span>
  <span class="s2">"user"</span>: <span class="s2">"vigo"</span>,
  <span class="s2">"stack"</span>: <span class="o">[</span>
    <span class="s2">"python"</span>,
    <span class="s2">"ruby"</span>,
    <span class="s2">"golang"</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre></div>
<p>Aynı veriden <strong>multiple-dict</strong> üretelim:</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'{"user": "vigo", "badges": ["python", "ruby", "golang"]}'</span> | jq <span class="s1">'{user, stack: .badges[]}'</span>
<span class="o">{</span>
  <span class="s2">"user"</span>: <span class="s2">"vigo"</span>,
  <span class="s2">"stack"</span>: <span class="s2">"python"</span>
<span class="o">}</span>
<span class="o">{</span>
  <span class="s2">"user"</span>: <span class="s2">"vigo"</span>,
  <span class="s2">"stack"</span>: <span class="s2">"ruby"</span>
<span class="o">}</span>
<span class="o">{</span>
  <span class="s2">"user"</span>: <span class="s2">"vigo"</span>,
  <span class="s2">"stack"</span>: <span class="s2">"golang"</span>
<span class="o">}</span>
</code></pre></div>
<h3>Durum Kontrolleri</h3>

<p>Elimizde şöyle bir veri var:</p>
<div class="highlight"><pre class="highlight json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vigo"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"is_admin"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lego"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"is_admin"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Admin ve standart kullanıcıları görelim:</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'[{"name": "vigo", "is_admin": true}, {"name": "lego", "is_admin": false}]'</span> | jq <span class="s1">'.[] | if .is_admin == true then (.name + " is admin")  else (.name + " is standard user")  end'</span>
<span class="s2">"vigo is admin"</span>
<span class="s2">"lego is standard user"</span>
</code></pre></div>
<p>Eldeki veriyi <code>csv</code> formatına çevirebiliriz:</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'[{"id": 1, "name": "vigo", "age": 46}, {"id": 2, "name": "ezel", "age": 7}]'</span> <span class="se">\</span>
    | jq <span class="nt">-r</span> <span class="s1">'(map(keys) | add | unique) as $cols | map(. as $row | $cols | map($row[.])) as $rows | $cols, $rows[] | @csv'</span>
<span class="s2">"age"</span>,<span class="s2">"id"</span>,<span class="s2">"name"</span>
46,1,<span class="s2">"vigo"</span>
7,2,<span class="s2">"ezel"</span>
</code></pre></div>
<p>Keza veriyi <code>xpath</code> gibi görüntüleyebiliriz:</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'[{"id": 1, "name": "vigo", "age": 46}, {"id": 2, "name": "ezel", "age": 7}]'</span> | jq <span class="nt">-r</span> <span class="s1">'path(..) | map(tostring) | join("/")'</span>

0
0/id
0/name
0/age
1
1/id
1/name
1/age
</code></pre></div>
<h3>Konfigürasyon Dosyası</h3>

<p>Eğer isterseniz kendiniz özelleştirilmiş fonksiyonlar yapıp kullanabilirsiniz.
Bunun için <code>~/.jq</code> dosyası oluşturmanız yeterli. Şimdi <code>schema</code> diye
bir fonksiyon oluşturup <code>~/.jq</code> dosyasına ekleyelim:</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'def schema: path(..) | map(tostring) | join("/");'</span> <span class="o">&gt;&gt;</span> ~/.jq
</code></pre></div>
<p>şimdi kullanalım:</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'{"data": {"users": [{"id": 1, "name": "vigo"},{"id": 2, "name": "ezel"}]}}'</span> <span class="se">\</span>
    | jq <span class="s1">'schema'</span>

<span class="s2">""</span>
<span class="s2">"data"</span>
<span class="s2">"data/users"</span>
<span class="s2">"data/users/0"</span>
<span class="s2">"data/users/0/id"</span>
<span class="s2">"data/users/0/name"</span>
<span class="s2">"data/users/1"</span>
<span class="s2">"data/users/1/id"</span>
<span class="s2">"data/users/1/name"</span>
</code></pre></div>
<p><code>jq</code> bir komut satırı araca olduğu için tüm dosya <code>pipe</code> işlemleri de geçerli oluyor.
Kimi zaman <code>pretty-print</code> yani çıktının güzel ve renkli görünmesi için, ya da dosyadan
okuyup başka bir yere paslamak için de kullanılır.</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">cat</span> /path/to/file.json | jq
<span class="nv">$ </span><span class="nb">cat</span> /path/to/file.json | jq <span class="o">&gt;</span> /path/to/output.json
<span class="nv">$ </span>curl <span class="nt">-sL</span> <span class="s1">'https://api.github.com/repos/vigo/statoo/commits?per_page=1'</span> | jq
</code></pre></div>
<p>ya da;</p>
<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span>curl <span class="nt">-sL</span> <span class="s1">'https://api.github.com/repos/vigo/statoo/commits?per_page=1'</span> | jq <span class="s1">'.[] | .commit.author'</span>
<span class="o">{</span>
  <span class="s2">"name"</span>: <span class="s2">"Uğur Özyılmazel"</span>,
  <span class="s2">"email"</span>: <span class="s2">"ugurozyilmazel@gmail.com"</span>,
  <span class="s2">"date"</span>: <span class="s2">"2021-08-27T10:14:12Z"</span>
<span class="o">}</span>
</code></pre></div>
<p>Dediğim gibi, <code>jq</code> benim gündelik hayatımda çok sık kullandığım bir araç. Ben
sadece bildiğim ve sık kullandığım konuları yazdım. Burada yazdıklarımdan çok
daha fazlası var. Umarım sizin de işinize yarar.</p>
</div>
                        </article>
                        
                            <nav class="mt-6 pagination is-centered" role="navigation" aria-label="pagination">
                                <a href="/blog/tr/2021/08/22/django-model-ipuclari/" class="pagination-previous has-text-link">&laquo; Django Model İpuçları</a>
                                <a href="/blog/tr/2021/08/22/django-model-ipuclari/" class="pagination-next has-text-link">Olmazsa Olmaz Golang Kütüphaneleri &raquo;</a>
                            </nav>
                    </div>
                </div>
                <div class="column is-3-desktop is-full-tablet">
                    <div class="content">
                            <div class="blog-post-list sidebar">
        <h1>Benzer Makaleler</h1>
        <p>Konu ile ilgili toplam “2” adet benzer makale bulunuyor.</p>
        <ul>
            <li>
                <a href="/blog/tr/2013/02/20/bash-completion-anotomisi/">Bash Completion Anotomisi</a>
                <time pubdate datetime="2013-02-20T23:37:00+02:00">
                    20 Şubat 2013, Çarşamba
                </time>
            </li>
            <li>
                <a href="/blog/tr/2009/07/26/bash-completion-olayi/">Bash Completion olayı!</a>
                <time pubdate datetime="2009-07-26T15:12:00+03:00">
                    26 Temmuz 2009, Pazar
                </time>
            </li>
        </ul>
    </div>
    

                        
                        <div class="blog-post-list sidebar">
    <h1>Yıllara Göre</h1>
    <p>Blog arşivinde toplam “79” kayıt bulunuyor.</p>
<p><a href="/blog/tr/yil/2023/" class="">2023 yılına ait 2 makale</a></p><p><a href="/blog/tr/yil/2022/" class="">2022 yılına ait 1 makale</a></p><p><a href="/blog/tr/yil/2021/" class="">2021 yılına ait 4 makale</a></p><p><a href="/blog/tr/yil/2016/" class="">2016 yılına ait 1 makale</a></p><p><a href="/blog/tr/yil/2015/" class="">2015 yılına ait 1 makale</a></p><p><a href="/blog/tr/yil/2014/" class="">2014 yılına ait 3 makale</a></p><p><a href="/blog/tr/yil/2013/" class="">2013 yılına ait 3 makale</a></p><p><a href="/blog/tr/yil/2012/" class="">2012 yılına ait 8 makale</a></p><p><a href="/blog/tr/yil/2011/" class="">2011 yılına ait 16 makale</a></p><p><a href="/blog/tr/yil/2010/" class="">2010 yılına ait 6 makale</a></p><p><a href="/blog/tr/yil/2009/" class="">2009 yılına ait 22 makale</a></p><p><a href="/blog/tr/yil/2008/" class="">2008 yılına ait 11 makale</a></p><p><a href="/blog/tr/yil/2006/" class="">2006 yılına ait 1 makale</a></p></div>
                    </div>
                </div>
            </div>

        </div>
    </section>


    <footer class="footer">
    <div class="container">
        <div class="content">
            <a href="/feed-tr.xml" title="RSS Aboneliği">
                <span class="fa-stack" style="vertical-align: top;"><i class="fa-regular fa-circle fa-stack-2x"></i><i class="fa-solid fa-square-rss fa-stack-1x"></i></span>
            </a>

            <a target="_blank" href="https://github.com/sponsors/vigo" title="GitHub Sponsorluk">
                <span class="fa-stack" style="vertical-align: top;"><i class="fa-regular fa-circle fa-stack-2x"></i><i class="fa-solid fa-heart fa-stack-1x"></i></span>
            </a>

            <a target="_blank" href="https://patreon.com/vigoo" title="Patreon Destek">
                <span class="fa-stack" style="vertical-align: top;"><i class="fa-regular fa-circle fa-stack-2x"></i><i class="fa-brands fa-patreon fa-stack-1x"></i></span>
            </a>

            <a target="_blank" href="https://github.com/vigo" title="GitHub Profili">
                <span class="fa-stack" style="vertical-align: top;"><i class="fa-regular fa-circle fa-stack-2x"></i><i class="fa-brands fa-github fa-stack-1x"></i></span>
            </a>

            <a target="_blank" href="https://github.com/vbyazilim" title="VB YAZILIM GitHub Profili">
                <span class="fa-stack" style="vertical-align: top;"><i class="fa-regular fa-circle fa-stack-2x"></i><i class="fa-brands fa-github fa-stack-1x"></i></span>
            </a>

            <a target="_blank" href="https://hub.docker.com/u/vigo/" title="Dockerhub Profili">
                <span class="fa-stack" style="vertical-align: top;"><i class="fa-regular fa-circle fa-stack-2x"></i><i class="fa-brands fa-docker fa-stack-1x"></i></span>
            </a>

            <a target="_blank" href="https://www.linkedin.com/in/ugurozyilmazel" title="LinkedIn Profili">
                <span class="fa-stack" style="vertical-align: top;"><i class="fa-regular fa-circle fa-stack-2x"></i><i class="fa-brands fa-linkedin fa-stack-1x"></i></span>
            </a>

            <a target="_blank" href="https://www.linkedin.com/company/vbyazilim/" title="VB YAZILIM LinkedIn Profili">
                <span class="fa-stack" style="vertical-align: top;"><i class="fa-regular fa-circle fa-stack-2x"></i><i class="fa-brands fa-linkedin fa-stack-1x"></i></span>
            </a>

            <a target="_blank" href="https://rubygems.org/profiles/vigo" title="Rubygems Profili">
                <span class="fa-stack" style="vertical-align: top;"><i class="fa-regular fa-circle fa-stack-2x"></i><i class="fa-solid fa-laptop-code fa-stack-1x"></i></span>
            </a>

            <a target="_blank" href="https://pypi.org/user/vigo" title="Python Package Index Profili">
                <span class="fa-stack" style="vertical-align: top;"><i class="fa-regular fa-circle fa-stack-2x"></i><i class="fa-solid fa-laptop-code fa-stack-1x"></i></span>
            </a>

            <a target="_blank" href="https://vigos.hashnode.dev/" title="Hashnode Profili">
                <span class="fa-stack" style="vertical-align: top;"><i class="fa-regular fa-circle fa-stack-2x"></i><i class="fa-brands fa-hashnode fa-stack-1x"></i></span>
            </a>

            <a target="_blank" href="https://opensource-heroes.com/u/vigo" title="Open Source Heroes Profili">
                <span class="fa-stack" style="vertical-align: top;"><i class="fa-regular fa-circle fa-stack-2x"></i><i class="fa-brands fa-osi fa-stack-1x"></i></span>
            </a>

            <a target="_blank" href="https://dev.to/vigo" title="Dev Community Profili">
                <span class="fa-stack" style="vertical-align: top;"><i class="fa-regular fa-circle fa-stack-2x"></i><i class="fa-brands fa-dev fa-stack-1x"></i></span>
            </a>

            <a target="_blank" href="https://csdb.dk/scener/?id=8379" title="CSDB">
                <span class="fa-stack" style="vertical-align: top;"><i class="fa-regular fa-circle fa-stack-2x"></i><i class="fa-solid fa-cube fa-stack-1x"></i></span>
            </a>
            <a target="_blank" href="https://www.pouet.net/user.php?who=4721" title="Pouet">
                <span class="fa-stack" style="vertical-align: top;"><i class="fa-regular fa-circle fa-stack-2x"></i><i class="fa-solid fa-cube fa-stack-1x"></i></span>
            </a>

            <a target="_blank" href="http://janeway.exotica.org.uk/author.php?id=11962" title="Amiga Exotica">
                <span class="fa-stack" style="vertical-align: top;"><i class="fa-regular fa-circle fa-stack-2x"></i><i class="fa-solid fa-cube fa-stack-1x"></i></span>
            </a>

            <a target="_blank" href="https://demozoo.org/sceners/6273" title="Demozoo">
                <span class="fa-stack" style="vertical-align: top;"><i class="fa-regular fa-circle fa-stack-2x"></i><i class="fa-solid fa-cube fa-stack-1x"></i></span>
            </a>

            <a target="_blank" href="https://www.demoparty.net/users/vigo" title="Demoparty.net">
                <span class="fa-stack" style="vertical-align: top;"><i class="fa-regular fa-circle fa-stack-2x"></i><i class="fa-solid fa-cube fa-stack-1x"></i></span>
            </a>
            
            <script type="text/javascript">
            document.write('<a href="mailto:');
            document.write("hthebmlvyznmry\100tznvy\056pbz".replace(/[a-zA-Z]/g, function(c){return String.fromCharCode((c<="Z"?90:122)>=(c=c.charCodeAt(0)+13)?c:c-26);}));
            document.write('" title="E-Posta"');
            document.write('<span class="fa-stack" style="vertical-align: top;"><i class="fa-regular fa-circle fa-stack-2x"></i><i class="fa-solid fa-at fa-stack-1x"></i></span>');
            document.write('</a>');
            </script>

            <a target="_blank" href="https://vbyazilim.com/" title="Şirketim: VB YAZILIM">
                <span class="fa-stack" style="vertical-align: top;"><i class="fa-regular fa-circle fa-stack-2x"></i><i class="fas fa-building fa-stack-1x"></i></span>
            </a>

        </div>
    </div>
</footer>



</body>
</html>